

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>allennlp.common.util &mdash; AllenNLP 0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="AllenNLP 0.0 documentation" href="../index.html"/>
        <link rel="up" title="allennlp.common" href="allennlp.common.html"/>
        <link rel="next" title="allennlp.data" href="allennlp.data.html"/>
        <link rel="prev" title="allennlp.common.testing" href="allennlp.common.testing.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/allennlp-logo-dark.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Package Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="allennlp.commands.html">allennlp.commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.commands.subcommand.html">allennlp.commands.subcommand</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.commands.evaluate.html">allennlp.commands.evaluate</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.commands.predict.html">allennlp.commands.predict</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.commands.serve.html">allennlp.commands.serve</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.commands.train.html">allennlp.commands.train</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="allennlp.common.html">allennlp.common</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.checks.html">allennlp.common.checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.file_utils.html">allennlp.common.file_utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.params.html">allennlp.common.params</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.registrable.html">allennlp.common.registrable</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.squad_eval.html">allennlp.common.squad_eval</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.tee_logger.html">allennlp.common.tee_logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.common.testing.html">allennlp.common.testing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">allennlp.common.util</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="allennlp.data.html">allennlp.data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.dataset.html">allennlp.data.dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.dataset_readers.html">allennlp.data.dataset_readers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.dataset_reader.html">allennlp.data.dataset_readers.dataset_reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.conll2003.html">allennlp.data.dataset_readers.conll2003</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.language_modeling.html">allennlp.data.dataset_readers.language_modeling</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.reading_comprehension.html">allennlp.data.dataset_readers.reading_comprehension</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.coreference_resolution.html">allennlp.data.dataset_readers.coreference_resolution</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.semantic_role_labeling.html">allennlp.data.dataset_readers.semantic_role_labeling</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.seq2seq.html">allennlp.data.dataset_readers.seq2seq</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.sequence_tagging.html">allennlp.data.dataset_readers.sequence_tagging</a></li>
<li class="toctree-l3"><a class="reference internal" href="allennlp.data.dataset_readers.snli.html">allennlp.data.dataset_readers.snli</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.fields.html">allennlp.data.fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.instance.html">allennlp.data.instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.iterators.html">allennlp.data.iterators</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.token_indexers.html">allennlp.data.token_indexers</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.tokenizers.html">allennlp.data.tokenizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.data.vocabulary.html">allennlp.data.vocabulary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="allennlp.models.html">allennlp.models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.model.html">allennlp.models.model</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.archival.html">allennlp.models.archival</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.crf_tagger.html">allennlp.models.crf_tagger</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.decomposable_attention.html">allennlp.models.decomposable_attention</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.encoder_decoders.html">allennlp.models.encoder_decoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.reading_comprehension.html">allennlp.models.reading_comprehension</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.coreference_resolution.html">allennlp.models.coreference_resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.semantic_role_labeler.html">allennlp.models.semantic_role_labeler</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.models.simple_tagger.html">allennlp.models.simple_tagger</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="allennlp.modules.html">allennlp.modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.attention.html">allennlp.modules.attention</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.augmented_lstm.html">allennlp.modules.augmented_lstm</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.lstm_cell_with_projection.html">allennlp.modules.lstm_cell_with_projection</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.stacked_elmo_lstm.html">allennlp.modules.stacked_elmo_lstm</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.conditional_random_field.html">allennlp.modules.conditional_random_field</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.feedforward.html">allennlp.modules.feedforward</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.highway.html">allennlp.modules.highway</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.matrix_attention.html">allennlp.modules.matrix_attention</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.seq2seq_encoders.html">allennlp.modules.seq2seq_encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.seq2vec_encoders.html">allennlp.modules.seq2vec_encoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.similarity_functions.html">allennlp.modules.similarity_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.stacked_alternating_lstm.html">allennlp.modules.stacked_alternating_lstm</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.text_field_embedders.html">allennlp.modules.text_field_embedders</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.time_distributed.html">allennlp.modules.time_distributed</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.modules.token_embedders.html">allennlp.modules.token_embedders</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="allennlp.nn.html">allennlp.nn</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.nn.activations.html">allennlp.nn.activations</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.nn.initializers.html">allennlp.nn.initializers</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.nn.regularizers.html">allennlp.nn.regularizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.nn.util.html">allennlp.nn.util</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="allennlp.service.html">allennlp.service</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.service.db.html">allennlp.service.db</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.service.permalinks.html">allennlp.service.permalinks</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.service.predictors.html">allennlp.service.predictors</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.service.server_sanic.html">allennlp.service.server_sanic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="allennlp.training.html">allennlp.training</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allennlp.training.learning_rate_schedulers.html">allennlp.training.learning_rate_schedulers</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.training.metrics.html">allennlp.training.metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.training.optimizers.html">allennlp.training.optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="allennlp.training.trainer.html">allennlp.training.trainer</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AllenNLP</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="allennlp.common.html">allennlp.common</a> &raquo;</li>
        
      <li>allennlp.common.util</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/allennlp.common.util.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-allennlp.common.util">
<span id="allennlp-common-util"></span><h1>allennlp.common.util<a class="headerlink" href="#module-allennlp.common.util" title="Permalink to this headline">¶</a></h1>
<p>Various utilities that don&#8217;t fit anwhere else.</p>
<dl class="function">
<dt id="allennlp.common.util.add_noise_to_dict_values">
<code class="descclassname">allennlp.common.util.</code><code class="descname">add_noise_to_dict_values</code><span class="sig-paren">(</span><em>dictionary: typing.Dict[A, float], noise_param: float</em><span class="sig-paren">)</span> &#x2192; typing.Dict[A, float]<a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L103-L114"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.add_noise_to_dict_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new dictionary with noise added to every key in <code class="docutils literal"><span class="pre">dictionary</span></code>.  The noise is
uniformly distributed within <code class="docutils literal"><span class="pre">noise_param</span></code> percent of the value for every value in the
dictionary.</p>
</dd></dl>

<dl class="function">
<dt id="allennlp.common.util.get_spacy_model">
<code class="descclassname">allennlp.common.util.</code><code class="descname">get_spacy_model</code><span class="sig-paren">(</span><em>spacy_model_name: str</em>, <em>pos_tags: bool</em>, <em>parse: bool</em>, <em>ner: bool</em><span class="sig-paren">)</span> &#x2192; typing.Any<a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L165-L182"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.get_spacy_model" title="Permalink to this definition">¶</a></dt>
<dd><p>In order to avoid loading spacy models a whole bunch of times, we&#8217;ll save references to them,
keyed by the options we used to create the spacy model, so any particular configuration only
gets loaded once.</p>
</dd></dl>

<dl class="function">
<dt id="allennlp.common.util.group_by_count">
<code class="descclassname">allennlp.common.util.</code><code class="descname">group_by_count</code><span class="sig-paren">(</span><em>iterable: typing.List[typing.Any], count: int, default_value: typing.Any</em><span class="sig-paren">)</span> &#x2192; typing.List[typing.List[typing.Any]]<a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L47-L59"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.group_by_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list and groups it into sublists of size <code class="docutils literal"><span class="pre">count</span></code>, using <code class="docutils literal"><span class="pre">default_value</span></code> to pad the
list at the end if the list is not divisable by <code class="docutils literal"><span class="pre">count</span></code>.</p>
<p>For example:
&gt;&gt;&gt; group_by_count([1, 2, 3, 4, 5, 6, 7], 3, 0)
[[1, 2, 3], [4, 5, 6], [7, 0, 0]]</p>
<p>This is a short method, but it&#8217;s complicated and hard to remember as a one-liner, so we just
make a function out of it.</p>
</dd></dl>

<dl class="function">
<dt id="allennlp.common.util.namespace_match">
<code class="descclassname">allennlp.common.util.</code><code class="descname">namespace_match</code><span class="sig-paren">(</span><em>pattern: str</em>, <em>namespace: str</em><span class="sig-paren">)</span><a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L117-L127"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.namespace_match" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches a namespace pattern against a namespace string.  For example, <code class="docutils literal"><span class="pre">*tags</span></code> matches
<code class="docutils literal"><span class="pre">passage_tags</span></code> and <code class="docutils literal"><span class="pre">question_tags</span></code> and <code class="docutils literal"><span class="pre">tokens</span></code> matches <code class="docutils literal"><span class="pre">tokens</span></code> but not
<code class="docutils literal"><span class="pre">stemmed_tokens</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="allennlp.common.util.pad_sequence_to_length">
<code class="descclassname">allennlp.common.util.</code><code class="descname">pad_sequence_to_length</code><span class="sig-paren">(</span><em>sequence: typing.List</em>, <em>desired_length: int</em>, <em>default_value: typing.Callable[typing.Any] = &lt;function &lt;lambda&gt;&gt;</em>, <em>padding_on_right: bool = True</em><span class="sig-paren">)</span> &#x2192; typing.List<a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L62-L99"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.pad_sequence_to_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a list of objects and pads it to the desired length, returning the padded list.  The
original list is not modified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sequence</strong> : List</p>
<blockquote>
<div><p>A list of objects to be padded.</p>
</div></blockquote>
<p><strong>desired_length</strong> : int</p>
<blockquote>
<div><p>Maximum length of each sequence. Longer sequences are truncated to this length, and
shorter ones are padded to it.</p>
</div></blockquote>
<p><strong>default_value: Callable, default=lambda: 0</strong></p>
<blockquote>
<div><p>Callable that outputs a default value (of any type) to use as padding values.</p>
</div></blockquote>
<p><strong>padding_on_right</strong> : bool, default=True</p>
<blockquote>
<div><p>When we add padding tokens (or truncate the sequence), should we do it on the right or
the left?</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>padded_sequence</strong> : List</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allennlp.common.util.prepare_environment">
<code class="descclassname">allennlp.common.util.</code><code class="descname">prepare_environment</code><span class="sig-paren">(</span><em>params: typing.Union[allennlp.common.params.Params, typing.Dict[str, typing.Any]]</em><span class="sig-paren">)</span><a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L130-L159"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.prepare_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets random seeds for reproducible experiments. This may not work as expected
if you use this from within a python project in which you have already imported Pytorch.
If you use the scripts/run_model.py entry point to training models with this library,
your experiments should be reasonably reproducible. If you are using this from your own
project, you will want to call this function before importing Pytorch. Complete determinism
is very difficult to achieve with libraries doing optimized linear algebra due to massively
parallel execution, which is exacerbated by using GPUs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>params: Params object or dict, required.</strong></p>
<blockquote class="last">
<div><p>A <code class="docutils literal"><span class="pre">Params</span></code> object or dict holding the json parameters.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allennlp.common.util.sanitize">
<code class="descclassname">allennlp.common.util.</code><code class="descname">sanitize</code><span class="sig-paren">(</span><em>x: typing.Any</em><span class="sig-paren">)</span> &#x2192; typing.Any<a class="reference external" href="http://github.com/allenai/allennlp/blob/master/allennlp/common/util.py#L19-L45"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allennlp.common.util.sanitize" title="Permalink to this definition">¶</a></dt>
<dd><p>Sanitize turns PyTorch and Numpy types into basic Python types so they
can be serialized into JSON.</p>
</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="allennlp.data.html" class="btn btn-neutral float-right" title="allennlp.data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="allennlp.common.testing.html" class="btn btn-neutral" title="allennlp.common.testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Allen Institute for Artificial Intelligence.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>